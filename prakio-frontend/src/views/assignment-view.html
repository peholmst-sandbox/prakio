<!--
@license
-->

<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/app-layout/app-header/app-header.html">
<link rel="import" href="../../bower_components/app-layout/app-header-layout/app-header-layout.html">
<link rel="import" href="../../bower_components/app-layout/app-scroll-effects/app-scroll-effects.html">
<link rel="import" href="../../bower_components/app-layout/app-toolbar/app-toolbar.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-progress/paper-progress.html">

<link rel="import" href="../shared-styles.html">

<dom-module id="assignment-view">
    <template>
        <style include="shared-styles">
            :host {
                display: block;
                @apply --paper-font-common-base;                
            }

            app-header app-toolbar [main-title] {
                padding-left: 16px;
            }            
        </style>

        <app-route
            route="{{parameters.subroute}}"
            pattern="/:id"
            data="{{subrouteData}}"></app-route>

        <app-header-layout>
            <app-header slot="header" reveals effects="waterfall">
                <app-toolbar>
                    <paper-icon-button icon="arrow-back" on-click="_onGoBackClicked"></paper-icon-button>
                    <div main-title>Edit Assignment Report</div>
                </app-toolbar>
                <!--<template is="dom-if" if="[[loadingAssignments]]">
                    <paper-progress value="10" indeterminate></paper-progress>        
                </template>-->
            </app-header>
            <div>
                <!-- TODO main content -->
            </div>
        </app-header-layout>
    </template>

    <script>
        class AssignmentView extends Polymer.Element {
            static get is() { return 'assignment-view'; }

            static get properties() {
                return {
                    apiEndpoint: {
                        type: String,
                        value: AppConfiguration.apiEndpoint
                    },
                    subrouteData: Object,
                    // Parameters passed from the enclosing 'prakio-view' element.
                    parameters: Object,
                    // This shouldn't be neccessary, but the Analyzer isn't picking up
                    // Polymer.Element#rootPath
                    rootPath: String,                    
                };
            }

            static get observers() {
                return ['_onAssignmentIdChanged(subrouteData.id)'];
            }

            _onGoBackClicked() {
                window.history.back();
            }

            _onAssignmentIdChanged(id) {
                console.log('Appointment ID: ' + id);
                // TODO Load from backend and update form
            }
        }
        window.customElements.define(AssignmentView.is, AssignmentView);
    </script>
</dom-module>
